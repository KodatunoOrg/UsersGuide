<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"> 
<HTML> 
<HEAD LANG="ja"> 
	<TITLE>Kodatuno User's Guide</TITLE> 
	<meta HTTP-EQUIV="Content-type" CONTENT="text/html; charset=euc-jp"> 
</HEAD> 
<BODY bgcolor="#ffffff"> 
<table cellspacing="0" cellpadding="0" border="0" width="100%">   
	<tr valign="top" height="32">   
	</tr>   
	<tr valign="top">        
		<td width="256" valign="bottom" align="left">          
			<IMG SRC="pixmaps/logo.jpg" width="300" height="98" alt="Kodatuno Logo" ALIGN="top">
		</td>        
		<td valign="bottom" align="center">          
			<center> 	   
		<b><big>Kodatuno User's Guide</big>
		</b>
		<center>        
		</td>       
		<td width="20%" valign="bottom" align="right">          
			<A HREF="./3-1.html" TARGET="_top">Prev</A>     
			<A HREF="./index.html" TARGET="_top">Index</A>          
			<A HREF="./3-3.html" TARGET="_top">Next</A><br>     
		</td>   
	</tr> 
</table> 
<blockquote> 

<BR><HR><H2>NURBS演算ライブラリ</H2>
【NURBS_Func.h】<BR><BR>
NURBS操作モジュールを提供します．<BR>

<BR>■シンボル
<pre><font size="3">
#define PTNUMMAX            10000           // NURBSの点列の最大数
#define RANKMAX             9               // NURBSの階数の最大値
#define INTERSECPTNUMMAX    1000            // 交点格納配列長
#define NEAREST_GAP         0.01            // 2点が同一点とみなす距離
#define CONVERG_GAP         0.00001         // ニュートン法の収束を判別する閾値
#define CONVDIVNUM          100             // 収束計算用のパラメータ分割数
#define TRM_BORDERDIVNUM    100             // トリム境界線上に生成する点の数
#define FORWARD             1               // 交線追跡の方向(順)
#define INVERS             -1               // 交線追跡の方向(逆)
#define PARAM_U             0               // u方向を表すシンボル
#define PARAM_V             1               // v方向を表すシンボル
#define OUTTER_TRIM         0               // 外周トリミング領域
#define INNER_TRIM          1               // 内周トリミング領域
#define PARAMDIVNUM         10              // 初期値探索用のパラメータ分割数
#define RUNGE_KUTTA         0               // Runge-Kutta法のシンボル
#define BULIRSH_STOER       1               // Bulirsch-Stoer法のシンボル
#define CALC_OFFSET         2               // オフセット曲面計算のシンボル
#define BS_DIV              11              // Bulirsch-Stoer法の刻み数

</font></pre>
<HR>
<BR>■インクルードライブラリ<BR><BR>
"BODY.h" "Quaternion.h" "SFQuant.h"<BR><BR>
<HR>
<BR>■型定義<BR><BR>
なし<BR><BR>
<HR>
<BR>■クラス<BR><BR>
NURBS_Func<BR>
<継承><BR>
なし<BR><BR>
<HR>
<BR>■関数(Class NURBS_Func)<BR><BR>

<A NAME="CalcNurbs*Coord()"> </A>
<H4>public<BR>
Coord CalcNurbsCCoord(NURBSC *NurbsC,double t)  <BR>
Coord CalcNurbsSCoord(NURBSS *NurbsS,double div_u,double div_v) <BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>指定したパラメータにおけるNURBS曲線/曲面の座標値を求める．</DD>
<DT> ＜引数＞ </DT>
<DD>*NurbsC / *NurbsS：NURBS曲線/曲面へのポインタ<BR>
 t：NURBS曲線パラメータ<BR>
 div_u/div_v：NURBS曲面パラメータ</DD>
<DT> ＜戻り値＞ </DT>
<DD>NURBS曲線/曲面の座標値</DD>
</DL>
<BR><BR>

<A NAME="CalcNurbs*Coords()"> </A>
<H4>public<BR>
void CalcNurbsCCoords(NURBSC *NurbsC,int Ptnum,double *T,Coord *Pt) <BR>
void CalcNurbsSCoords(NURBSS *NurbsS,int Ptnum,Coord *UV,Coord *Pt) <BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>指定したパラメータ群におけるNURBS曲線/曲面の座標値群を求める．</DD>
<DT> ＜引数＞ </DT>
<DD>*NurbsC / *NurbsS：NURBS曲線/曲面へのポインタ <BR>
 Ptnum：求める点群の数  <BR>
 T/UV：NURBS曲線/曲面のパラメータ群  <BR>
 Pt：NURBS曲線/曲面の座標値 <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>なし</DD>
</DL>
<BR><BR>

<A NAME="CalcDiff*NurbsS()"> </A>
<H4>public<BR>
Coord CalcDiffuNurbsS(NURBSS *NurbsS,double div_u,double div_v);<BR>
Coord CalcDiffvNurbsS(NURBSS *NurbsS,double div_u,double div_v);<BR>
Coord CalcDiffNNurbsS(NURBSS *NurbsS,int k,int l,double div_u,double div_v);<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>指定したパラメータにおけるNURBS曲面のu/v方向の1階/N階微分係数を求める．</DD>
<DT> ＜引数＞ </DT>
<DD>*NurbsS：NURBS曲面へのポインタ  <BR>
 div_u：uパラメータ  <BR>
 div_v：vパラメータ <BR>
 k：u方向微分階数
 l：v方向微分階数
</DD>
<DT> ＜戻り値＞ </DT>
<DD>微分係数</DD>
</DL>
<BR><BR>

<A NAME="GenNurbs*()"> </A>
<H4>public<BR>
int GenNurbsC(NURBSC *NurbsC,int K,int M,int N,double T[],double W[],Coord cp[],double V[],int prop[],int euflag)<BR>
int GenNurbsC(NURBSC *NurbsC,NURBSC nurb)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>1つのNURBS曲線を生成/コピーする．</DD>
<DT> ＜引数＞ </DT>
<DD>*NurbsC：NURBS曲線へのポインタ  <BR>
 K：コントロールポイントの数  <BR>
 M：階数  <BR>
 N：ノットベクトルの数  <BR>
 T[]：ノットシーケンスの値  <BR>
 W[]：Weightの値  <BR>
 cp[]：コントロールポイントの値  <BR>
 V[]：パラメータの範囲  <BR>
 prop[]：各プロパティの値  <BR>
 euflag：ディレクトリ部 Entity Use Flagの値  <BR>
 *NurbsC：新たに生成するNURBS曲線 <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>成功：KOD_TRUE  <BR>
 失敗：KOD_ERR <BR>
</DD>
</DL>
<BR><BR>

<A NAME="GenNurbsS()"> </A>
<H4>public<BR>
int GenNurbsS(NURBSS *NurbsS,int Mu,int Mv,int Ku,int Kv,double *S,double *T,double **W,Coord **Cp,double U_s,double U_e,double V_s,double V_e) <BR>
int NURBS_Func::GenNurbsS(NURBSS *Nurbs,NURBSS nurb)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>1つのNURBS曲面を生成/コピーする．</DD>
<DT> ＜引数＞ </DT>
<DD> *NurbsS：NURBS曲面へのポインタ  <BR>
 Mu：u方向の階数  <BR>
 Mv：v方向の階数  <BR>
 Ku：u方向のコントロールポイントの数  <BR>
 Kv：v方向のコントロールポイントの数  <BR>
 *S：u方向のノットベクトルの値  <BR>
 *T：v方向のノットベクトルの値  <BR>
 **W：Weightの値  <BR>
 **Cp：コントロールポイントの値  <BR>
 U_s：uパラメータの範囲の最初の値  <BR>
 U_e：uパラメータの範囲の最後の値  <BR>
 V_s：vパラメータの範囲の最初の値  <BR>
 V_e：vパラメータの範囲の最後の値  <BR>
 *NurbsS：新たに生成するNURBS曲線  <BR>
 nurb：コピーするNURBS曲面  <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD> 成功：KOD_TRUE   <BR>
 失敗：KOD_ERR  <BR>
</DD>
</DL>
<BR><BR>

<A NAME="GenRotNurbsS()"> </A>
<H4>public<BR>
int GenRotNurbsS(NURBSS *NurbsS,NURBSC NurbsC,Coord Axis,double deg)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>NURBS曲線を原点を通る任意の回転軸回りにある角度だけ回転させ，回転サーフェスを生成する．</DD>
<DT> ＜引数＞ </DT>
<DD>  *NurbsS：生成された回転サーフェス  <BR>
 NurbsC：回転させるNURBS曲線  <BR>
 Axis：任意の回転軸  <BR>
 deg：回転角度 <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD> 成功：KOD_TRUE   <BR>
 失敗：KOD_ERR  <BR>
</DD>
</DL>
<BR><BR>

<A NAME="GenSweepNurbsS()"> </A>
<H4>public<BR>
int GenSweepNurbsS(NURBSS *NurbsS,NURBSC NurbsC,Coord Axis,double Len) <BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>NURBS曲線を原点を通る任意の回転軸回りにある角度だけ回転させ，回転サーフェスを生成する．</DD>
<DT> ＜引数＞ </DT>
<DD>   *NurbsS：生成されたスイープサーフェス  <BR>
 NurbsC：スイープさせるNURBS曲線  <BR>
 Axis：任意の軸  <BR>
 Len：移動距離 <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD> 成功：KOD_TRUE   <BR>
 失敗：KOD_ERR  <BR>
</DD>
</DL>
<BR><BR>

<A NAME="GenIsoparamCurveU()"> </A>
<H4>public<BR>
int GenIsoparamCurveU(NURBSS *P,double u,NURBSC *C) <BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>NURBS曲面上のu方向パラメータ値を固定したときのアイソパラメトリックNURBS曲線を生成する．</DD>
<DT> ＜引数＞ </DT>
<DD>   *NurbsS：アイソパラメトリック曲線生成元のNURBS曲面  <BR>
 u：u方向の固定パラメータ  <BR>
 *C：生成されたアイソパラメトリック曲線  <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD> 成功：KOD_TRUE   <BR>
 失敗：KOD_ERR (引数uが*Pのuパラメータ範囲外) <BR>
</DD>
</DL>
<BR><BR>

<A NAME="GenIsoparamCurveV()"> </A>
<H4>public<BR>
int GenIsoparamCurveV(NURBSS *P,double v,NURBSC *C) <BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>NURBS曲面上のv方向パラメータ値を固定したときのアイソパラメトリックNURBS曲線を生成する．</DD>
<DT> ＜引数＞ </DT>
<DD>   *NurbsS：アイソパラメトリック曲線生成元のNURBS曲面  <BR>
 v：v方向の固定パラメータ  <BR>
 *C：生成されたアイソパラメトリック曲線  <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD> 成功：KOD_TRUE   <BR>
 失敗：KOD_ERR (引数vが*Pのvパラメータ範囲外) <BR>
</DD>
</DL>
<BR><BR>

<A NAME="GenTrimdNurbsS()"> </A>
<H4>public<BR>
int GenTrimdNurbsS(TRIMD_NURBSS *TNurbs,TRIMD_NURBSS  tnurb) <BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>トリム面を有するNURBS曲面を生成する．</DD>
<DT> ＜引数＞ </DT>
<DD>    *Tnurbs：新たに生成するトリム面  <BR>
 nurb：元となるトリム面 <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD> 成功：KOD_TRUE   <BR>
 失敗：KOD_ERR  <BR>
</DD>
</DL>
<BR><BR>

<A NAME="DelTrimdNurbsS()"> </A>
<H4>public<BR>
int DelTrimdNurbsS(TRIMD_NURBSS *TNurbs)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>GenTrimdNurbsS()によって生成されたトリム面を削除する．</DD>
<DT> ＜引数＞ </DT>
<DD>    *Tnurbs：削除するトリム面  <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD> 成功：KOD_TRUE   <BR>
 失敗：KOD_ERR  <BR>
</DD>
</DL>
<BR><BR>

<A NAME="DelNurbs*()"> </A>
<H4>public<BR>
void DelNurbsC(NURBSC *NurbsC)<BR>
void DelNurbsS(NURBSS *NurbsS)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>GenNurbsC()/GenNurbsS()によって生成されたNURBS曲線/曲面を削除する．</DD>
<DT> ＜引数＞ </DT>
<DD>   *NurbsC/*NurbsS：削除するNURBS曲線/曲面  <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD> なし<BR>
</DD>
</DL>
<BR><BR>

<A NAME="CalcBSbasis()"> </A>
<H4>public<BR>
double CalcBSbasis(double t, double knot[],int N,int I,int M)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>GenNurbsC()/GenNurbsS()によって生成されたNURBS曲線/曲面を削除する．</DD>
<DT> ＜引数＞ </DT>
<DD>    t：ノット  <BR>
 knot[]：ノットベクトル  <BR>
 N：ノットベクトルの数  <BR>
 I：Bスプライン基底関数下添え字の1つ目(0〜) <BR>
 M：Bスプライン基底関数下添え字の2つ目(階数)   <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD> Bスプライン基底関数の計算結果<BR>
</DD>
</DL>
<BR><BR>

<A NAME="CalcDiffBSbasis()"> </A>
<H4>public<BR>
double CalcDiffBSbasis(double t,double knot[],int N,int I,int M)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>Bスプライン基底関数の1階微分係数を求める．</DD>
<DT> ＜引数＞ </DT>
<DD>     t：ノット  <BR>
 knot[]：ノットベクトル  <BR>
 N：ノットベクトルの数  <BR>
 I：注目中のコントロールポイント  <BR>
 M：階数 <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD> Bスプライン基底関数の1階微分係数の計算結果<BR>
</DD>
</DL>
<BR><BR>

<A NAME="CalcDiffBSbasisN()"> </A>
<H4>public<BR>
double CalcDiffBSbasisN(double t,double knot[],int N,int I,int M,int Dn)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>Bスプライン基底関数のN階微分係数を求める．</DD>
<DT> ＜引数＞ </DT>
<DD>  t：ノット  <BR>
 knot[]：ノットベクトル  <BR>
 N：ノットベクトルの数  <BR>
 I：注目中のコントロールポイント <BR> 
 M：階数  <BR>
 Dn：微分階数 <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD> Bスプライン基底関数のN階微分係数の計算結果<BR>
</DD>
</DL>
<BR><BR>

<A NAME="CalcDiffNurbsC()"> </A>
<H4>public<BR>
Coord CalcDiffNurbsC(NURBSC *NurbsC,double t)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>NURBS曲線の1階微分係数を求める．</DD>
<DT> ＜引数＞ </DT>
<DD>  *NurbsC：NURBS曲線へのポインタ  <BR>
 t：ノット <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD> NURBS曲線の1階微分係数<BR>
</DD>
</DL>
<BR><BR>

<A NAME="CalcDiff2NurbsC()"> </A>
<H4>public<BR>
Coord CalcDiff2NurbsC(NURBSC *NurbsC,double t)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>NURBS曲線の2階微分係数を求める．</DD>
<DT> ＜引数＞ </DT>
<DD>  *NurbsC：NURBS曲線へのポインタ  <BR>
 t：ノット <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD> NURBS曲線の2階微分係数<BR>
</DD>
</DL>
<BR><BR>

<A NAME="CalcDiffNNurbsC()"> </A>
<H4>public<BR>
Coord CalcDiffNNurbsC(NURBSC *NurbsC,int r,double t)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>NURBS曲線のN階微分係数を求める．</DD>
<DT> ＜引数＞ </DT>
<DD>  *NurbsC：NURBS曲線へのポインタ  <BR>
 r：微分階数
 t：ノット <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD> NURBS曲線の微分係数<BR>
</DD>
</DL>
<BR><BR>

<A NAME="CalcNormVecOnNurbsS()"> </A>
<H4>public<BR>
Coord CalcNormVecOnNurbsS(NURBSS *nurb,double u,double v)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>NURBS曲面上の(u,v)における法線ベクトルを求める．</DD>
<DT> ＜引数＞ </DT>
<DD>  *nurb：NURBS曲面へのポインタ  <BR>
 u：uパラメータ  <BR>
 ｖ：vパラメータ <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD> 単位法線ベクトル<BR>
</DD>
</DL>
<BR><BR>

<A NAME="CalcDiff*NormVecOnNurbsS()"> </A>
<H4>public<BR>
Coord CalcDiffuNormVecOnNurbsS(NURBSS *nurb,double u,double v)<BR>
Coord CalcDiffvNormVecOnNurbsS(NURBSS *nurb,double u,double v)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>NURBS曲面上の(u,v)における法線ベクトルのu/v方向1階微分を求める．</DD>
<DT> ＜引数＞ </DT>
<DD>  *nurb：NURBS曲面へのポインタ  <BR>
 u：uパラメータ  <BR>
 ｖ：vパラメータ <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD> 計算結果<BR>
</DD>
</DL>
<BR><BR>

<A NAME="CalcMeanCurvature()"> </A>
<H4>public<BR>
double CalcMeanCurvature(NURBSS *nurb,double u,double v)<BR>
double CalcMeanCurvature(SFQuant q)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>NURBS曲面上の(u,v)における平均曲率を求める．</DD>
<DT> ＜引数＞ </DT>
<DD>  *nurb：NURBS曲面へのポインタ  <BR>
 u：uパラメータ  <BR>
 v：vパラメータ <BR>
 q：曲面の基本量<BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD> 平均曲率<BR>
</DD>
</DL>
<BR><BR>

<A NAME="CalcMeanCurvatureNormVec()"> </A>
<H4>public<BR>
Coord CalcMeanCurvatureNormVec(NURBSS *nurb,double u,double v)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>NURBS曲面上の(u,v)における平均曲率法線ベクトルを求める．</DD>
<DT> ＜引数＞ </DT>
<DD>  *nurb：NURBS曲面へのポインタ  <BR>
 u：uパラメータ  <BR>
 ｖ：vパラメータ <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD> 平均曲率法線ベクトル<BR>
</DD>
</DL>
<BR><BR>

<A NAME="CalcGaussCurvature()"> </A>
<H4>public<BR>
double CalcGaussCurvature(NURBSS *nurb,double u,double v)<BR>
double CalcGaussCurvature(SFQuant q)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>NURBS曲面上の(u,v)におけるガウス曲率を求める．</DD>
<DT> ＜引数＞ </DT>
<DD>  *nurb：NURBS曲面へのポインタ  <BR>
 u：uパラメータ  <BR>
 v：vパラメータ <BR>
 q：曲面の基本量<BR>

</DD>
<DT> ＜戻り値＞ </DT>
<DD> ガウス曲率<BR>
</DD>
</DL>
<BR><BR>

<A NAME="CalcGaussCurvatureNormVec()"> </A>
<H4>public<BR>
Coord CalcGaussCurvatureNormVec(NURBSS *nurb,double u,double v)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>NURBS曲面上の(u,v)におけるガウス曲率法線ベクトルを求める．</DD>
<DT> ＜引数＞ </DT>
<DD>  *nurb：NURBS曲面へのポインタ  <BR>
 u：uパラメータ  <BR>
 ｖ：vパラメータ <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD> ガウス曲率法線ベクトル<BR>
</DD>
</DL>
<BR><BR>



<A NAME="ClacuIntersecPtNurbsLine()"> </A>
<H4>public<BR>
int ClacuIntersecPtNurbsLine(NURBSS *Nurb,Coord r,Coord p,int Divnum,Coord *ans,int anssize)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>NURBS曲面と直線の交点を算出する．</DD>
<DT> ＜引数＞ </DT>
<DD>  *Nurb：NURBS曲面へのポインタ  <BR>
 r：直線N(t)上の1点  <BR>
 p：直線N(t)の方向  <BR>
 Divnum：NURBS曲面の分割数 <BR>
 *ans：交点のu,v,tパラメータ  <BR>
 anssize：ansの配列長 <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD> 交点の数  <BR>
 KOD_ERR：収束しなかった <BR>
</DD>
</DL>
<BR><BR>

<A NAME="CalcIntersecPtNurbsPt()"> </A>
<H4>public<BR>
int CalcIntersecPtNurbsPt(NURBSS *S,Coord P,int Divnum,double Stepsize,Coord *Q)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD> NURBS曲面S上における空間上の1点Pからの最近傍点Qをニュートン法により求める．</DD>
<DT> ＜引数＞ </DT>
<DD>  *Nurb：NURBS曲面へのポインタ  <BR>
 P：空間上の任意点
 Divnum：ニュートン法初期値指定用の曲面分割数  <BR>
 Stepsize：ニュートンパラメータ更新時のステップサイズ(1 <= Stepsize < 0)  <BR>
 *Q：交点のu,vパラメータ <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD> KOD_FALSE：収束しなかった  <BR>
 KOD_TRUE：収束した <BR>
</DD>
</DL>
<BR><BR>

<A NAME="CalcIntersecIsparaCurve*()"> </A>
<H4>public<BR>
int CalcIntersecIsparaCurveU(NURBSS *nurb,double V,Coord pt,Coord nvec,int Divnum,double *ans,int ans_size)<BR>
int CalcIntersecIsparaCurveV(NURBSS *nurb,double U,Coord pt,Coord nvec,int Divnum,double *ans,int ans_size)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD> NURBS曲面のU/V方向アイソパラ曲線(V/Uパラメータを固定)と平面との交点をニュートン法により求める．</DD>
<DT> ＜引数＞ </DT>
<DD>  *nurb：NURBS曲面へのポインタ  <BR>
 V/U：固定するNURBS曲面パラメータ
 pt：平面上の一点  <BR>
 nvec：平面の法線ベクトル  <BR>
 Divnum：ニュートン法初期値指定用の曲面分割数  <BR>
 *ans：算出された交点のtパラメータ値を格納  <BR>
 ans_size：ansの配列長  <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD> 交点の個数  <BR>
 KOD_ERR：交点の数がans_sizeを超えた <BR>
</DD>
</DL>
<BR><BR>

<A NAME="CalcIntersecCurve()"> </A>
<H4>public<BR>
int CalcIntersecCurve(NURBSC *nurb,Coord pt,Coord nvec,int Divnum,double *ans,int ans_size,int LoD)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>NURBS曲線と平面との交点をニュートン法により求める．</DD>
<DT> ＜引数＞ </DT>
<DD>   *nurb：NURBS曲面へのポインタ   <BR>
 pt：平面上の一点   <BR>
 nvec：平面の法線ベクトル   <BR>
 Divnum：NURBS曲線のパラメータ分割数(初期点探索用)
 *ans：算出された交点のtパラメータ値   <BR>
 ans_size：ansの配列長  <BR>
 LoD：詳細度（ニュートン法の更新パラメータを足しこむときに，LoDで割ることで，急激なパラメータ変更を避ける．通常は1でよいが，解が得られない場合は値を大きくする．2とか3とか） <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD> 交点の個数  <BR>
 交点は最大で(M-1)*(K-M+1)点得られる．  
 よって引数*ansは（M-1)*(K-M+1)個の配列を用意することが望ましい． <BR>
</DD>
</DL>
<BR><BR>

<A NAME="CalcIntersecCurve3()"> </A>
<H4>public<BR>
int CalcIntersecCurve3(NURBSC *nurb,Coord pt,Coord nvec,double *ans,int ans_size)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>NURBS曲線と平面との交点を求める．</DD>
<DT> ＜引数＞ </DT>
<DD>   *nurb：NURBS曲面へのポインタ   <BR>
 pt：平面上の一点   <BR>
 nvec：平面の法線ベクトル   <BR>
 *ans：算出された交点のtパラメータ値   <BR>
 ans_size：ansの配列長  <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD> 交点の個数  <BR>
 交点は最大で(M-1)*(K-M+1)点得られる．  
 よって引数*ansは（M-1)*(K-M+1)個の配列を用意することが望ましい． <BR>
</DD>
</DL>
<BR><BR>

<A NAME="CalcIntersecPtsPlaneV3()"> </A>
<H4>public<BR>
int CalcIntersecPtsPlaneV3(NURBSS *nurb,Coord pt,Coord nvec,int v_divnum,Coord *ans,int ans_size)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>3次以下のNURBS曲面と平面との交点群を代数解法にて求める(vパラメータ)．</DD>
<DT> ＜引数＞ </DT>
<DD>    *nurb：NURBS曲面へのポインタ  <BR>
 pt：平面上の一点  <BR>
 nvec：平面の法線ベクトル  <BR>
 v_divnum：vパラメータ分割数  <BR>
 *ans：算出された交点のu,vパラメータ値  <BR>
 ans_size：ansの配列長 <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD> 交点の個数(交点の数がans_sizeを超えた：KOD_ERR) <BR>
</DD>
</DL>
<BR><BR>

<A NAME="CalcIntersecPtsPlaneU3()"> </A>
<H4>public<BR>
int CalcIntersecPtsPlaneU3(NURBSS *nurb,Coord pt,Coord nvec,int u_divnum,Coord *ans,int ans_size)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>3次以下のNURBS曲面と平面との交点群を代数解法にて求める(vパラメータ)．</DD>
<DT> ＜引数＞ </DT>
<DD>     *nurb：NURBS曲面へのポインタ  <BR>
 pt：平面上の一点  <BR>
 nvec：平面の法線ベクトル  <BR>
 u_divnum：uパラメータ分割数  <BR>
 *ans：算出された交点のu,vパラメータ値  <BR>
 ans_size：ansの配列長 <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD> 交点の個数(交点の数がans_sizeを超えた：KOD_ERR) <BR>
</DD>
</DL>
<BR><BR>

<A NAME="CalcIntersecPtsPlane*()"> </A>
<H4>public<BR>
int CalcIntersecPtsPlaneU(NURBSS *nurbss,Coord pt,Coord nvec,int u_divnum,Coord *ans,int ans_size)<BR>
int CalcIntersecPtsPlaneV(NURBSS *nurbss,Coord pt,Coord nvec,int v_divnum,Coord *ans,int ans_size)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>U/V方向のアイソパラ曲線を指定した分割数で生成し，各曲線とNURBS曲面との交点を算出する</DD>
<DT> ＜引数＞ </DT>
<DD>     *nurb：NURBS曲面へのポインタ  <BR>
 pt：平面上の一点  <BR>
 nvec：平面の法線ベクトル  <BR>
 u_divnum/v_divnum：u/vパラメータ分割数  <BR>
 *ans：算出された交点のu,vパラメータ値  <BR>
 ans_size：ansの配列長 <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD> 交点の個数(交点の数がans_sizeを超えた：KOD_ERR) <BR>
</DD>
</DL>
<BR><BR>

<A NAME="CalcIntersecPtsPlaneSearch()"> </A>
<H4>public<BR>
int CalcIntersecPtsPlaneSearch(NURBSS *nurb,Coord pt,Coord nvec,double ds,int initdivnum,Coord *ans,int ans_size,int method)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>NURBS曲面と平面との交点群を交線追跡法にて求める．</DD>
<DT> ＜引数＞ </DT>
<DD> *nurb：NURBS曲面へのポインタ  <BR>
 pt：平面上の一点  <BR>
 nvec：平面の法線ベクトル  <BR>
 ds：交線(交点群)の粗さ(密0.1〜2疎)  <BR>
 *ans：算出された交点のu,vパラメータ値  <BR>
 ans_size：ansの配列長 <BR>
 method : 交点算出時の数値計算法の選択（RUNGE_KUTTA：ルンゲクッタ法, BULIRSH_STOER：Bulirsh-Stoer法)
</DD>
<DT> ＜戻り値＞ </DT>
<DD> 交点の個数(NURBS曲面と平面が交差していない：KOD_FALSE，特異点または発散により処理を中断：KOD_ERR)<BR>
</DD>
</DL>
<BR><BR>

<A NAME="CalcIntersecPtsOffsetPlaneSearch()"> </A>
<H4>public<BR>
int CalcIntersecPtsOffsetPlaneSearch(NURBSS *nurb,double os,Coord pt,Coord nvec,double ds,int initdivnum,Coord *ans,int ans_size)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>オフセットNURBS曲面と平面との交点群を交点追跡法にて求める．</DD>
<DT> ＜引数＞ </DT>
<DD> *nurb：NURBS曲面へのポインタ  <BR>
 os：オフセット量  <BR>
 pt：平面上の一点  <BR>
 nvec：平面の法線ベクトル  <BR>
 ds：交線(交点群)の粗さ(密0.1〜2疎)  <BR>
 initdivnum：初期点探索の荒さ(密10〜1疎)
 *ans：算出された交点のu,vパラメータ値  <BR>
 ans_size：ansの配列長 <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD> 交点の個数(NURBS曲面と平面が交差していない：KOD_FALSE，特異点または発散により処理を中断：KOD_ERR)<BR>
</DD>
</DL>
<BR><BR>

<A NAME="CalcIntersecPtsNurbsSNurbsC()"> </A>
<H4>public<BR>
int CalcIntersecPtsNurbsSNurbsC(NURBSS *NurbsS,NURBSC *NurbsC,int Divnum,Coord *ans,int ans_size)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>NURBS曲面とNURBS曲線との交点群を交線追跡法で求める．</DD>
<DT> ＜引数＞ </DT>
<DD> *NurbsS：NURBS曲面へのポインタ  <BR>
 *NurbsC：NURBS曲線へのポインタ<BR>
 Divnum：初期点サーチ時の曲線分割数
 *ans：解を格納
 ans_size：ans配列の配列長
</DD>
<DT> ＜戻り値＞ </DT>
<DD> 交点の個数(NURBS曲面と平面が交差していない：KOD_FALSE，交点の数がans_sizeを超えた：KOD_ERR)<BR>
</DD>
</DL>
<BR><BR>


<A NAME="CalcIntersecPtsNurbsSGeom()"> </A>
<H4>public<BR>
int CalcIntersecPtsNurbsSGeom(NURBSS *nurbR,NURBSS *nurbS,int u_divnum,int v_divnum,Coord *ansR,Coord *ansS,int ans_size)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>NURBS曲面S(u,v)とNURBS曲面R(w,t)の交線(交点群)を幾何学的にて求める(補助平面を用いた解法）</DD>
<DT> ＜引数＞ </DT>
<DD>  *nurbR：NURBS曲面R(w,t)へのポインタ  <BR>
 *nurbS：NURBS曲面S(u,v)へのポインタ  <BR>
 u_divnum：uパラメータの分割数  <BR>
 v_divnum：vパラメータの分割数  <BR>
 *ansR：算出された交点のw,tパラメータ値  <BR>
 *ansS：算出された交点のu,vパラメータ値  <BR>
 ans_size：ansの配列長 <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>交点の個数(交点の数がans_sizeを超えた：KOD_ERR) <BR>
</DD>
</DL>
<BR><BR>

<A NAME="CalcIntersecPtsNurbsSSearch()"> </A>
<H4>public<BR>
int CalcIntersecPtsNurbsSSearch(NURBSS *nurbR,NURBSS *nurbS,int div,double ds,Coord *ansR,Coord *ansS,int ans_size)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>NURBS曲面S(u,v)とNURBS曲面R(w,t)の交線(交点群)を交点追跡法にて求める．</DD>
<DT> ＜引数＞ </DT>
<DD>  *nurbR：NURBS曲面R(w,t)へのポインタ  <BR>
 *nurbS：NURBS曲面S(u,v)へのポインタ  <BR>
 div：パラメータの分割数  <BR>
 ds：交線(交点群)の粗さ(密0.1〜2疎)  <BR>
 *ansR：算出された交点のw,tパラメータ値  <BR>
 *ansS：算出された交点のu,vパラメータ値  <BR>
 ans_size：ansの配列長 <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>NURBS曲面同士が交差していない：KOD_FALSE  特異点または発散により処理を中断：KOD_ERR <BR>
</DD>
</DL>
<BR><BR>

<A NAME="CalcIntersecPtsNurbsCNurbsCParam()"> </A>
<H4>public<BR>
int CalcIntersecPtsNurbsCNurbsCParam(NURBSC *NurbA,NURBSC *NurbB,int Divnum,Coord *ans,int ans_size)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>NURBS曲線同士の交点を求めるをニュートン法にて求める．</DD>
<DT> ＜引数＞ </DT>
<DD>  *NurbA,NurbB：2つのNURBS曲線へのポインタ  <BR>
 DivNum：初期点サーチ時の曲線分割数<BR>
 *ans：解を格納<BR>
 ans_size：ans配列の配列長<BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>交点の数(交点の数がans_sizeを超えた：KOD_ERR)<BR>
</DD>
</DL>
<BR><BR>

<A NAME="SearchExtremum_BS()"> </A>
<H4>public<BR>
int SearchExtremum_BS(NURBSS *S,Coord nf,double u0,double v0,double H,int param,int direction,Coord *ans)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>Bulirsch-Stoer法により極地探索を行う(微分方程式：du(s)/ds = fu(u,v) と、dv(s)/ds = fv(u,v)の解探索)</DD>
<DT> ＜引数＞ </DT>
<DD>  *S：NURBS曲面へのポインタ  <BR>
 nf：平面の法線ベクトル  <BR>
 u0：開始点の曲面パラメータu  <BR>
 v0：開始点の曲面パラメータv  <BR>
 H：探索幅  <BR>
 param：u方向の1階微分が0となる極値の探索(PARAM_U) or v方向探索(PARAM_V)の選択  <BR>
 direction：順方向探索(FORWARDを指定)or逆方向探索(INVERSEを指定)  <BR>
 *ans：解を格納<BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>KOD_TRUE：正常終了<BR>
KOD_FALSE:特異点により処理を中断<BR>
KOD_ERR:パラメータの指定ミスにより処理を中断<BR>
</DD>
</DL>
<BR><BR>

<A NAME="GetBSplCoef*()"> </A>
<H4>public<BR>
int GetBSplCoef3(int M,int K,int i,double *t,double **coef)<BR>
int GetBSplCoef2(int M,int K,int i,double *t,double **coef)<BR>
int GetBSplCoef1(int M,int K,int i,double *t,double **coef)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>3/2/1次のBスプライン曲線の各係数を求める．</DD>
<DT> ＜引数＞ </DT>
<DD> M：階数  
 K：コントロールポイントの数  <BR>
 i：注目中のコントロールポイント<BR>  
 *t：ノットベクトル列  <BR>
 *coef：算出される係数 <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>正常終了：KOD_TRUE<BR>
</DD>
</DL>
<BR><BR>

<A NAME="ShiftNurbs*()"> </A>
<H4>public<BR>
void ShiftNurbsC(NURBSC *nurbs,Coord shift)<BR>
void ShiftNurbsS(NURBSS *nurbs,Coord shift)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>NURBS曲線/曲面をシフトする．</DD>
<DT> ＜引数＞ </DT>
<DD>  *NurbsC/*NurbsS：シフトされるNURBS曲線/曲面 <BR>
 shift：シフト量 <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>なし<BR>
</DD>
</DL>
<BR><BR>

<A NAME="ChRatioNurbs*()"> </A>
<H4>public<BR>
void ChRatioNurbsC(NURBSC *NurbsC,Coord ratio)<BR>
void ChRatioNurbsS(NURBSS *NurbsS,Coord ratio)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>NURBS曲線/曲面の倍率を変更する．</DD>
<DT> ＜引数＞ </DT>
<DD>  *NurbsC/*NurbsS：変更されるNURBS曲線/曲面 <BR>
 ratio：倍率<BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>なし<BR>
</DD>
</DL>
<BR><BR>

<A NAME="SetCPNurbsS()"> </A>
<H4>public<BR>
int SetCPNurbsS(NURBSS *nurbs,NURBSS Nurbs)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>NURBS曲面間にコントロールポイントを代入する．</DD>
<DT> ＜引数＞ </DT>
<DD>   *nurbs：代入されるNURBS曲面 <BR> 
 Nurbs：代入元のNURBS曲面 <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>成功：KOD_TRUE <BR> 
 失敗：KOD_ERR <BR>
</DD>
</DL>
<BR><BR>

<A NAME="GenInterpolatedNurbsC1()"> </A>
<H4>public<BR>
int GenInterpolatedNurbsC1(NURBSC *Nurbs,Coord *P,int PNum,int N)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>与えられた点列を補間する最高4階のNURBS曲線を生成する(端末条件を与えない)．</DD>
<DT> ＜引数＞ </DT>
<DD>  *Nurbs：生成されるNURBS曲線<BR>  
 *P：点列  <BR>
 PNum：点列の数 <BR> 
 M：階数 <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>成功：KOD_TRUE <BR> 
 失敗：KOD_ERR <BR>
</DD>
</DL>
<BR><BR>

<A NAME="GenInterpolatedNurbsC2()"> </A>
<H4>public<BR>
int GenInterpolatedNurbsC2(NURBSC *Nurbs,Coord *P_,int PNum,int N)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>与えられた点列を補間する最高4階のNURBS曲線を生成する(端末条件：始点とC2で一致)．</DD>
<DT> ＜引数＞ </DT>
<DD> *Nurbs：生成されるNURBS曲線  <BR>
 *P_：通過点列  <BR>
 PNum：通過点列の数 <BR>
 M：階数 <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD> 正常終了：KOD_TRUE  <BR>
 始点と終点の不一致：KOD_FALSE  <BR>
 点列の数が1個未満：KOD_ERR <BR>
</DD>
</DL>
<BR><BR>

<A NAME="GenApproximationNurbsC()"> </A>
<H4>public<BR>
int GenApproximationNurbsC(NURBSC *Nurbs,Coord *P,int PNum,int M)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>与えられた点列を近似するn階のNURBS曲線を生成する．</DD>
<DT> ＜引数＞ </DT>
<DD>  *Nurbs：生成されるNURBS曲線  <BR>
 *P：点列  <BR>
 Pnum：点列の数  <BR>
 M：階数 <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>  成功：KOD_TRUE<BR>  
 失敗：KOD_ERR <BR>
</DD>
</DL>
<BR><BR>

<A NAME="GenNurbsCfromCP()"> </A>
<H4>public<BR>
int GenNurbsCfromCP(NURBSC *Nurbs,Coord *P,int PNum,int M)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>コントロールポイントからNURBS曲線を生成する．</DD>
<DT> ＜引数＞ </DT>
<DD>  *Nurbs：生成されるNURBS曲線  <BR>
 *P：点列  <BR>
 Pnum：点列の数  <BR>
 M：階数 <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>  成功：KOD_TRUE<BR>  
 失敗：KOD_ERR <BR>
</DD>
</DL>
<BR><BR>

<A NAME="GenPolygonalLine()"> </A>
<H4>public<BR>
int GenPolygonalLine(NURBSC *Nurbs,Coord *P,int PNum)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>折れ線を生成する．</DD>
<DT> ＜引数＞ </DT>
<DD>  *Nurbs：生成されるNURBS曲線<BR>  
 *P：コントロールポイント  <BR>
 PNum：コントロールポイントの数 <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>  成功：KOD_TRUE<BR>  
 失敗：KOD_ERR <BR>
</DD>
</DL>
<BR><BR>

<A NAME="GenInterpolatedNurbsS1()"> </A>
<H4>public<BR>
int GenInterpolatedNurbsS1(NURBSS *Nurbs,Coord **P,int PNum_u,int PNum_v,int Mu,int Mv)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>与えられた点列を補間する最高4階のNURBS曲面を生成する．</DD>
<DT> ＜引数＞ </DT>
<DD>  *Nurbs：生成されるNURBS曲面  <BR>
 **P：与えられた点列  <BR>
 PNum_u/PNum_v：点の数  <BR>
 Mu/Mv：階数 <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>  成功：KOD_TRUE<BR>  
 失敗：KOD_ERR <BR>
</DD>
</DL>
<BR><BR>

<A NAME="GenPolygonalSurface()"> </A>
<H4>public<BR>
int GenPolygonalSurface(NURBSS *Nurbs,Coord **P,int PNum_u,int PNum_v)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>折れ面を生成する．</DD>
<DT> ＜引数＞ </DT>
<DD>  *Nurbs：生成されるNURBS曲面<BR>  
 **P：コントロールポイント  <BR>
 PNum_u/PNum_v：コントロールポイントの数 <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>  成功：KOD_TRUE<BR>  
 失敗：KOD_ERR <BR>
</DD>
</DL>
<BR><BR>

<A NAME="GenApproximationNurbsS()"> </A>
<H4>public<BR>
int GenApproximationNurbsS(NURBSS *Nurbs,Coord **P,int PNum_u,int PNum_v,int Mu,int Mv)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>与えられた点列を近似するn階のNURBS曲面を生成する．</DD>
<DT> ＜引数＞ </DT>
<DD>  *Nurbs：生成されるNURBS曲面<BR>  
 **P：与えられた点列  <BR>
 PNum_u/PNum_v：点の数 <BR>
 Mu,Mv：u方向，v方向の階数
</DD>
<DT> ＜戻り値＞ </DT>
<DD>  成功：KOD_TRUE<BR>  
 失敗：KOD_ERR <BR>
</DD>
</DL>
<BR><BR>

<A NAME="GenNurbsSfromCP()"> </A>
<H4>public<BR>
int GenNurbsSfromCP(NURBSS *Nurbs,Coord **P,int PNum_u,int PNum_v,int Mu,int Mv)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>与えられたコントロールポイントからn階のNURBS曲面を生成する．</DD>
<DT> ＜引数＞ </DT>
<DD>  *Nurbs：生成されるNURBS曲面<BR>  
 **P：与えられたコントロールポイント列  <BR>
 PNum_u/PNum_v：点の数 <BR>
 Mu,Mv：u方向，v方向の階数
</DD>
<DT> ＜戻り値＞ </DT>
<DD>  成功：KOD_TRUE<BR>  
 失敗：KOD_ERR <BR>
</DD>
</DL>
<BR><BR>

<A NAME="DetermPtOnTRMSurf()"> </A>
<H4>public<BR>
int DetermPtOnTRMSurf(TRMS *Trim,double u,double v)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>注目中のNURBS曲面上の1点(u,v)がトリミング領域内にあるのかを判定する．</DD>
<DT> ＜引数＞ </DT>
<DD>  *Trim：トリム曲面へのポインタ <BR> 
 u：注目中のuパラメータ  <BR>
 ｖ：注目中のｖパラメータ <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>   面上(エッジ上含む)：KOD_TRUE  <BR>
 面外：KOD_FALSE  <BR>
 エラー：KOD_ERR  <BR>
</DD>
</DL>
<BR><BR>

<A NAME="GetPtsOnOuterTRMSurf()"> </A>
<H4>public<BR>
int GetPtsOnOuterTRMSurf(TRMS *Trm,Coord *Pt,int N)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>外周トリム面内の点のみ残す</DD>
<DT> ＜引数＞ </DT>
<DD>  *Trim：トリム曲面へのポインタ <BR> 
 *Pt：トリム面の(u,v)パラメータ群  <BR>
 N：Ptの数<BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>   残った点の数　(外周トリムが存在しない：KOD_FALSE)</DD></DL>
<BR><BR>

<A NAME="GetPtsOnInnerTRMSurf()"> </A>
<H4>public<BR>
int GetPtsOnOuterTRMSurf(TRMS *Trm,Coord *Pt,int N)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>内周トリム面外の点のみ残す</DD>
<DT> ＜引数＞ </DT>
<DD>  *Trim：トリム曲面へのポインタ <BR> 
 *Pt：トリム面の(u,v)パラメータ群  <BR>
 N：Ptの数<BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>   残った点の数　(内周トリムが存在しない：KOD_FALSE)</DD></DL>
<BR><BR>

<A NAME="GetPtsOnInnerTRMSurf()"> </A>
<H4>public<BR>
int GetPtsOnInnerOuterTRMSurf(TRMS *Trm,Coord *Pt,int N)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>内外周トリム面外の点のみ残す</DD>
<DT> ＜引数＞ </DT>
<DD>  *Trim：トリム曲面へのポインタ <BR> 
 *Pt：トリム面の(u,v)パラメータ群  <BR>
 N：Ptの数<BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>   残った点の数　(内外周トリムが存在しない：KOD_FALSE)</DD></DL>
<BR><BR>

<A NAME="RotNurbs*()"> </A>
<H4>public<BR>
void RotNurbsC(NURBSC *nurbs,Coord axis,double deg)<BR>
void RotNurbsS(NURBSS *nurbs,Coord axis,double deg)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>NURBS曲線/曲面をDベクトル回りにdeg(°)だけ回転させる．</DD>
<DT> ＜引数＞ </DT>
<DD> *nurbs：回転させるNURBS曲線/曲面  <BR>
 axis：回転軸の単位ベクトル<BR>  
 deg：角度(degree) <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD> なし<BR>
</DD>
</DL>
<BR><BR>

<A NAME="DetectInterfere*S()"> </A>
<H4>public<BR>
int DetectInterfereNurbsS(NURBSS *nurbR,NURBSS *nurbS,int divnum)<BR>
int DetectInterfereTrmS(TRIMD_NURBSS *tNurbR,TRIMD_NURBSS *tNurbS,int divnum)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>NURBS/トリム曲面S(u,v)とNURBS/トリム曲面R(w,t)の干渉を検出する．</DD>
<DT> ＜引数＞ </DT>
<DD>  *nurbsR/tNurbsR：NURBS/トリム曲面R(w,t)  <BR>
 *nurbsS/tNurbsS：NURBS/トリム曲面S(u,v)  <BR>
 divnum：パラメータ分割数 <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD> 干渉の有無(干渉あり：TRUE　干渉無し：FALSE)<BR>
</DD>
</DL>
<BR><BR>

<A NAME="CalcIntersecPtsPlaneGeom()"> </A>
<H4>public<BR>
double CalcIntersecPtsPlaneGeom(NURBSS *nurb,Coord pt,Coord nf,int u_divnum,int v_divnum,Coord *ans,int ans_size)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>NURBS曲面と平面との交点群を幾何学的に求める(補助平面を用いた解法)．</DD>
<DT> ＜引数＞ </DT>
<DD> *Nurb：NURBS曲面<BR>
 pt：平面上の一点
 nf：平面の法線ベクトル
 u_divnum：初期点サーチ時のuパラメータ分割数
 v_divnum：初期点サーチ時のvパラメータ分割数
 *ans：算出された交点のu,vパラメータ値をそれぞれans.x,ans.yに格納
 ans_size：ansの配列長
</DD>
<DT> ＜戻り値＞ </DT>
<DD>交点の個数(交点の数がans_sizeを超えた：KOD_ERR)<BR>
</DD>
</DL>
<BR><BR>

<A NAME="CalcNurbsCLength()"> </A>
<H4>public<BR>
double CalcNurbsCLength(NURBSC *Nurb)<BR>
double CalcNurbsCLength(NURBSC *,double a,double b)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>NURBS曲線の線分長を微小線分近似により求める．引数に区間[a,b]を指定した場合はその区間における線分長を返す</DD>
<DT> ＜引数＞ </DT>
<DD> *Nurb：対象となるNURBS曲線<BR>
a,b：線分長区間
</DD>
<DT> ＜戻り値＞ </DT>
<DD>線分長<BR>
</DD>
</DL>
<BR><BR>

<A NAME="CalcDeltaPtsOnNurbsC()"> </A>
<H4>public<BR>
int CalcDeltaPtsOnNurbsC(NURBSC *Nurb,int D,Coord *Pts)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>指定した分割数でNURBS曲線上の座標値を出力する．</DD>
<DT> ＜引数＞ </DT>
<DD> *Nurb：対象となるNURBS曲線  <BR>
 D：分割数  <BR>
 *Pts：出力される座標値を格納 <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>点数<BR>
</DD>
</DL>
<BR><BR>

<A NAME="CalcDeltaPtsOnNurbsS()"> </A>
<H4>public<BR>
int CalcDeltaPtsOnNurbsS(NURBSS *S,int Du,int Dv,Coord **Pts)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>指定した分割数(u,v)を分割し，でNURBS曲面上の座標値を出力する．</DD>
<DT> ＜引数＞ </DT>
<DD> *S：対象となるNURBS曲面  <BR>
 Du,Dv：u,v方向分割数  <BR>
 **Pts：出力される座標値を格納 <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>点数<BR>
</DD>
</DL>
<BR><BR>

<A NAME="CalcExtremumNurbsC()"> </A>
<H4>public<BR>
int CalcExtremumNurbsC(NURBSC *C,Coord nf,double *pt,int ptnum)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>NURBS曲線の指定した方向における極値の座標値を得る．</DD>
<DT> ＜引数＞ </DT>
<DD> *C：極値座標を求めたいNURBS曲線へのポインタ  <BR>
 nf：方向ベクトル   <BR>
 *pt：得られた極値のNurbs曲線パラメータ値列 <BR>
 ptnum：*ptの配列長<BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>得られた極値パラメータの数 (KOD_FALSE:得られなかった   KOD_ERR:極値パラメータの数がptnumを超えた)<BR>
</DD>
</DL>
<BR><BR>

<A NAME="New_NurbsC()"> </A>
<H4>public<BR>
int New_NurbsC(NURBSC *nurb,int K, int N)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>Nurbs曲線のメモリー確保．</DD>
<DT> ＜引数＞ </DT>
<DD> *nurb：極値座標を求めたいNURBS曲線へのポインタ  <BR>
 K：コントロールポイントの数   <BR>
 N：ノットベクトルの数<BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>KOD_TURE:メモリー確保に成功   KOD_ERR:メモリー確保に失敗<BR>
</DD>
</DL>
<BR><BR>

<A NAME="Free_NurbsC_1DArray()"> </A>
<H4>public<BR>
void Free_NurbsC_1DArray(NURBSC *a,int num)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>NURBS曲線配列のメモリー解放．</DD>
<DT> ＜引数＞ </DT>
<DD> *a：NURBS曲線配列へのポインタ  <BR>
 num：配列長   <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>なし<BR>
</DD>
</DL>
<BR><BR>

<A NAME="Free_NurbsC()"> </A>
<H4>public<BR>
void Free_NurbsC(NURBSC *a)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>NURBS曲線のメモリー解放．</DD>
<DT> ＜引数＞ </DT>
<DD> *a：NURBS曲線へのポインタ  <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>なし<BR>
</DD>
</DL>
<BR><BR>

<A NAME="New_NurbsS()"> </A>
<H4>public<BR>
int New_NurbsS(NURBSS *nurb,int K[2],int N[2])<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>NURBS曲面のメモリー確保．</DD>
<DT> ＜引数＞ </DT>
<DD> *nurb：メモリー確保するNurbs曲面へのポインタ  <BR>
 K[2]：u,vコントロールポイントの数 <BR>
 N[2]：u,vノットベクトルの数 <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>KOD_TURE:メモリー確保に成功   KOD_ERR:メモリー確保に失敗<BR>
</DD>
</DL>
<BR><BR>

<A NAME="Free_NurbsS_1DArray()"> </A>
<H4>public<BR>
void Free_NurbsS_1DArray(NURBSC *a,int num)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>NURBS曲面配列のメモリー解放．</DD>
<DT> ＜引数＞ </DT>
<DD> *a：NURBS曲面へのポインタ  <BR>
 num：配列長
</DD>
<DT> ＜戻り値＞ </DT>
<DD>なし<BR>
</DD>
</DL>
<BR><BR>

<A NAME="Free_NurbsS()"> </A>
<H4>public<BR>
void Free_NurbsS(NURBSC *a)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>NURBS曲面のメモリー解放．</DD>
<DT> ＜引数＞ </DT>
<DD> *a：NURBS曲面へのポインタ  <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>なし<BR>
</DD>
</DL>
<BR><BR>

<A NAME="New_TrmS()"> </A>
<H4>public<BR>
int New_TrmS(TRMS *trms,int num)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>トリム面のメモリー確保．</DD>
<DT> ＜引数＞ </DT>
<DD> *trms：メモリー確保するトリム面へのポインタ  <BR>
 num：トリム面の数 <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>KOD_TURE:メモリー確保に成功   KOD_ERR:メモリー確保に失敗<BR>
</DD>
</DL>
<BR><BR>

<A NAME="Free_TrmS_1DArray()"> </A>
<H4>public<BR>
void Free_TrmS_1DArray(TRMS *a,int num)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>トリム面配列のメモリー解放．</DD>
<DT> ＜引数＞ </DT>
<DD> *a：トリム面配列へのポインタ  <BR>
 num：配列長   <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>なし<BR>
</DD>
</DL>
<BR><BR>

<A NAME="Free_TrmS()"> </A>
<H4>public<BR>
void Free_TrmS(TRMS *a)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>トリム面のメモリー解放．</DD>
<DT> ＜引数＞ </DT>
<DD> *a：トリム面へのポインタ  <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>なし<BR>
</DD>
</DL>
<BR><BR>

<A NAME="New_CompC()"> </A>
<H4>public<BR>
int New_CompC(COMPC *compc,int num)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>複合曲線のメモリー確保．</DD>
<DT> ＜引数＞ </DT>
<DD> *compc：メモリー確保する複合曲線へのポインタ  <BR>
 num：複合曲線の数 <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>KOD_TURE:メモリー確保に成功   KOD_ERR:メモリー確保に失敗<BR>
</DD>
</DL>
<BR><BR>

<A NAME="Free_CompC_1DArray()"> </A>
<H4>public<BR>
void Free_CompC_1DArray(COMPC *a,int num)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>複合曲線配列のメモリー解放．</DD>
<DT> ＜引数＞ </DT>
<DD> *a：複合曲線配列へのポインタ  <BR>
 num：配列長   <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>なし<BR>
</DD>
</DL>
<BR><BR>

<A NAME="Free_CompC()"> </A>
<H4>public<BR>
void Free_CompC(COMPC *a)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>複合曲線のメモリー解放．</DD>
<DT> ＜引数＞ </DT>
<DD> *a：複合曲線へのポインタ  <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>なし<BR>
</DD>
</DL>
<BR><BR>

<A NAME="DebugForNurbsC()"> </A>
<H4>public<BR>
void DebugForNurbsC(NURBSC *nurbs)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>NURBS曲線情報をデバッグプリント</DD>
<DT> ＜引数＞ </DT>
<DD> *nurbs：NURBS曲線へのポインタ  <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>なし<BR>
</DD>
</DL>
<BR><BR>

<A NAME="DebugForNurbsS()"> </A>
<H4>public<BR>
void DebugForNurbsS(NURBSS *nurbs)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>NURBS曲面情報をデバッグプリント</DD>
<DT> ＜引数＞ </DT>
<DD> *nurbs：NURBS曲面へのポインタ  <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>なし<BR>
</DD>
</DL>
<BR><BR>

<A NAME="CalcTanVecOnNurbsC()"> </A>
<H4>public<BR>
Coord CalcTanVecOnNurbsC(NURBSC *C,double t)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>NURBS曲線上のtにおける単位接ベクトルをもとめる</DD>
<DT> ＜引数＞ </DT>
<DD> *C：NURBS曲線  <BR>
 t：NURBS曲線パラメータ  <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>単位接ベクトル <BR>
</DD>
</DL>
<BR><BR>

<A NAME="ConnectNurbsS*()"> </A>
<H4>public<BR>
int ConnectNurbsSU(NURBSS *S1,NURBSS *S2,NURBSS *S_)<BR>
int ConnectNurbsSV(NURBSS *S1,NURBSS *S2,NURBSS *S_)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>2枚のNURBS曲面を連結する(U/V方向に長くなる)</DD>
<DT> ＜引数＞ </DT>
<DD> *S1,*S2：連結する2つのNURBS曲面  <BR>
 *S_：連結され新たに生成されたNURBS曲面  <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD> 成功：KOD_TRUE,  失敗：KOD_FALSE <BR>
</DD>
</DL>
<BR><BR>

<A NAME="CalcCurvatureNurbsC()"> </A>
<H4>public<BR>
double CalcCurvatureNurbsC(NURBSC *C,double t)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>NURBS曲線の曲率を求める</DD>
<DT> ＜引数＞ </DT>
<DD> *C：NURBS曲線  <BR>
  t：NURBS曲線パラメータ  <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD> 曲率 <BR>
</DD>
</DL>
<BR><BR>

<A NAME="DivNurbsCParam()"> </A>
<H4>public<BR>
int DivNurbsCParam(NURBSC *C0, NURBSC *C1, NURBSC *C2, double t)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>NURBS曲線を指定したパラメータ値で分割する</DD>
<DT> ＜引数＞ </DT>
<DD> *C0：元のNURBS曲線  <BR>
 *C1：分割され新たに生成されたNURBS曲線   <BR>
 *C2：分割され新たに生成されたNURBS曲線   <BR>
 t1：分割位置を表す曲線パラメータ   <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD> 成功：KOD_TRUE,  失敗：KOD_FALSE <BR>
</DD>
</DL>
<BR><BR>

<A NAME="DivNurbsC()"> </A>
<H4>public<BR>
int DivNurbsC(NURBSC *C0, NURBSC *C1, NURBSC *C2, double L)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>NURBS曲線を指定した位置（端からの弧長）で分割する</DD>
<DT> ＜引数＞ </DT>
<DD> *C0：元のNURBS曲線  <BR>
 *C1：分割され新たに生成されたNURBS曲線   <BR>
 *C2：分割され新たに生成されたNURBS曲線   <BR>
 L：端からの弧長   <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD> 成功：KOD_TRUE,  失敗：KOD_FALSE <BR>
</DD>
</DL>
<BR><BR>

<A NAME="ConnectNurbsC()"> </A>
<H4>public<BR>
int ConnectNurbsC(NURBSC *C1,NURBSC *C2,NURBSC *C_)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>2本のNURBS曲線を連結する</DD>
<DT> ＜引数＞ </DT>
<DD> *C1：元のNURBS曲線  <BR>
 *C2：元のNURBS曲線   <BR>
 *C_：連結され新たに生成されたNURBS曲線   <BR>
 L：端からの弧長   <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD> 成功：KOD_TRUE,  失敗：KOD_FALSE <BR>
</DD>
</DL>
<BR><BR>

<A NAME="ReverseNurbsC()"> </A>
<H4>public<BR>
int ReverseNurbsC(NURBSC *C)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>NURBS曲線のノットベクトルの向きを反転する</DD>
<DT> ＜引数＞ </DT>
<DD> *C：NURBS曲線  <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD> なし <BR>
</DD>
</DL>
<BR><BR>

<A NAME="CalcParamLengthOnNurbsC()"> </A>
<H4>public<BR>
int CalcParamLengthOnNurbsC(NURBSC *C,double L,double Init_t)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>NURBS曲線において一端からの指定距離におけるパラメータ値を返す</DD>
<DT> ＜引数＞ </DT>
<DD> *C：NURBS曲線  <BR>
L：指定距離 <BR>
Init_t：解探索の初期パラメータ  <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD> 曲線パラメータ <BR>
</DD>
</DL>
<BR><BR>

<A NAME="CalcDeltaPtsOnNurbsC()"> </A>
<H4>public<BR>
int CalcDeltaPtsOnNurbsC(NURBSC *Nurb,double D,Coord *Pts)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>指定した間隔でNURBS曲線上の座標値を出力す</DD>
<DT> ＜引数＞ </DT>
<DD> *Nurb：NURBS曲線  <BR>
 D：指定間隔 <BR>
 *Pts：出力される座標値を格納  <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD> 点数 <BR>
</DD>
</DL>
<BR><BR>


<A NAME="GetNurbsCCoef()"> </A>
<H4>private<BR>
int GetNurbsCCoef(NURBSC *nurb,double **coef,int i,Coord *P,double *Q)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>NURBS曲線の係数を求める(最高3次)．</DD>
<DT> ＜引数＞ </DT>
<DD>  *nurb：対象となるNURBS曲線  <BR>
 coef：Bスプライン基底関数の係数  <BR>
 i：曲線の番号  <BR>
 *P/*Q：NURBS曲線の係数(P,Q) <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>成功：KOD_TRUE <BR> 
 失敗：KOD_ERR <BR>
</DD>
</DL>
<BR><BR>

<A NAME="CalcEquation()"> </A>
<H4>private<BR>
int CalcEquation(double *a,double *t,int M)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>3次方程式まで解く．</DD>
<DT> ＜引数＞ </DT>
<DD>  *a：係数<BR>  
 *t：解  <BR>
 M：次数  <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>成功：KOD_TRUE <BR> 
 失敗：KOD_ERR <BR>
</DD>
</DL>
<BR><BR>

<A NAME="GetNurbsSCoef()"> </A>
<H4>private<BR>
void GetNurbsSCoef(int M,double **coef,double *a,Coord *b,int i,Coord *P,double *Q)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>NURBS曲線C(u) or C(v)の係数を求める．</DD>
<DT> ＜引数＞ </DT>
<DD>  M：階数  <BR>
 coef：Bスプライン基底関数の係数  <BR>
 *a/*b：u/vを固定した時のNURBS曲線C(v)/C(u)の分母/分子の係数 <BR>
 i：曲線の番号  <BR>
 *P/*Q：固定されたパラメータにおけるNURBS曲面の係数(P,Q) <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>なし <BR>
</DD>
</DL>
<BR><BR>

<A NAME="GetIntersecEquation()"> </A>
<H4>private<BR>
void GetIntersecEquation(int M,Coord *P,double *Q,Coord pt,Coord nvec,double *a)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>NURBS曲線と平面の交線導出用方程式を得る．</DD>
<DT> ＜引数＞ </DT>
<DD> M：階数  <BR>
 *P/*Q：NURBS曲線の係数（P,Q)  <BR>
 pt：平面上の一点  <BR>
 nvec：平面の法線ベクトル  <BR>
 *a：結果  <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>なし <BR>
</DD>
</DL>
<BR><BR>

<A NAME="SearchIntersectPt()"> </A>
<H4>private<BR>
int SearchIntersectPt(NURBSS *nurb,Coord pt,Coord nvec,double ds,double *u,double *v,int direction)<BR>
int SearchIntersectPt(NURBSS *nurbR,NURBSS *nurbS,double ds,double *w,double *t,double *u,double *v,int direction)<BR>
int SearchIntersectPt_RKM(NURBSS *S,Coord pt,Coord n,double delta,double *u,double *v,int direction)<BR>
int SearchIntersectPt_BS(NURBSS *S,Coord pt,Coord nvec,double H,double *u0,double *v0,int direction)<BR>
int SearchIntersectPt_OS(NURBSS *S,Coord pt,Coord n,double delta,double *u,double *v,int direction)</H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>ニュートン法により交点を真値に収束させる(NURBS曲面と平面)<BR>
ニュートン法により交点を真値に収束させる(NURBS曲面同士)<BR>
4次のルンゲクッタ法により交点を収束させる(NURBS曲面と平面)<BR>
Bulirsch-Stoer法により交点を収束させる(NURBS曲面と平面)<BR>
4次のルンゲクッタ法により交点を収束させる(オフセットNURBS曲面と平面)<BR></DD>
<DT> ＜引数＞ </DT>
<DD> *nurb/nurbR：1つ目の対象となるNURBS曲面 <BR>
 pt,nvec/nurbS：2つ目の対象となる平面/NURBS曲面 <BR>
 ds,delta：粗さ  <BR>
 *u,*v,*w,*t：パラメータ  <BR>
 direction：追跡方向を表すフラグ <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>収束した場合：KOD_TRUE  <BR>
 パラメータ範囲外：KOD_FALSE  <BR>
 失敗：KOD_ERR  <BR>
</DD>
</DL>
<BR><BR>

<A NAME="GetSIPParam1()"> </A>
<H4>private<BR>
void GetSIPParam1(NURBSS *S,double u,double v,Coord pt,Coord nvec,int direction,Coord *f)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>曲面と平面の交点を表す微分方程式の右辺の値を得る</DD>
<DT> ＜引数＞ </DT>
<DD> *S：NURBS曲面  <BR>
 u,v：NURBS曲面パラメータ  <BR>
 pt：平面上の一点  <BR>
 nvec：平面の法線ベクトル  <BR>
 direction：追跡方向を表すフラグ  <BR>
 *f：計算結果  <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>なし <BR>
</DD>
</DL>
<BR><BR>

<A NAME="ApproxTrimBorder()"> </A>
<H4>private<BR>
void ApproxTrimBorder(COMPC *CompC,Coord *P)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>トリム境界線を点群で近似する</DD>
<DT> ＜引数＞ </DT>
<DD> *CompC：複合曲線  <BR>
  *P：近似点群  <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>店群の数（失敗：KOD_ERR） <BR>
</DD>
</DL>
<BR><BR>





<A NAME="DetermPtOnTRMSurf_sub()"> </A>
<H4>private<BR>
int DetermPtOnTRMSurf_sub(CONPS *Conps,double u,double v)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>面上線のタイプが複合曲線の場合のトリミング領域内外判定</DD>
<DT> ＜引数＞ </DT>
<DD>  *Conps：面上線へのポインタ <BR> 
 u/v：パラメータ <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>内外判定(失敗：KOD_ERR) <BR>
</DD>
</DL>
<BR><BR>

<A NAME="GetCurveKnotParam1()"> </A>
<H4>private<BR>
void GetCurveKnotParam1(Coord *P,int PNum,Vector T_)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>各通過点の曲線パラメータを算出(コード長の比から算出)</DD>
<DT> ＜引数＞ </DT>
<DD> *P：通過点列  <BR>
 PNum：通過点列の数  <BR>
 T_：曲線パラメータを格納 <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>なし <BR>
</DD>
</DL>
<BR><BR>

<A NAME="GetCurveKnotParam2()"> </A>
<H4>private<BR>
void GetCurveKnotParam2(Coord *P,int PNum,Vector T_)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>各通過点の曲線パラメータを算出(コード長の平方根の比から算出)</DD>
<DT> ＜引数＞ </DT>
<DD> *P：通過点列  <BR>
 PNum：通過点列の数  <BR>
 T_：曲線パラメータを格納 <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>なし <BR>
</DD>
</DL>
<BR><BR>

<A NAME="GetSurfaceKnotParam()"> </A>
<H4>private<BR>
void GetSurfaceKnotParam(Vector S,Vector T,Coord **P,int uNum,int vNum)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>補間曲面用u,vパラメータを得る</DD>
<DT> ＜引数＞ </DT>
<DD> S：u方向曲線パラメータ  <BR>
 T：v方向曲線パラメータ  <BR>
 **P：与えられた点列 <BR>
 uNum：u方向の点列数
 vNum：v方向の点列数
</DD>
<DT> ＜戻り値＞ </DT>
<DD>なし <BR>
</DD>
</DL>
<BR><BR>

<A NAME="GetEqIntervalKont()"> </A>
<H4>private<BR>
void GetEqIntervalKont(int K,int M,Vector T)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>曲線/曲面パラメータから等間隔なノットベクトルを算出</DD>
<DT> ＜引数＞ </DT>
<DD> K：コントロールポイントの数  <BR>
 M：階数  <BR>
 T：格納するノットベクトル列 <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>なし <BR>
</DD>
</DL>
<BR><BR>

<A NAME="ChangeKnotVecRange()"> </A>
<H4>private<BR>
void ChangeKnotVecRange(Vector T, int N, int M, int K, double Ts, double Te)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>曲線/曲面パラメータの定義域を変更する</DD>
<DT> ＜引数＞ </DT>
<DD> T：変更したいノットベクトル列  <BR>
 N：Tの配列長
 M：階数  <BR>
 K：コントロールポイントの数
 Tst：開始ノットベクトル
 Te：終了ノットベクトル
</DD>
<DT> ＜戻り値＞ </DT>
<DD>なし <BR>
</DD>
</DL>
<BR><BR>

<A NAME="GetInterpolatedKnot()"> </A>
<H4>private<BR>
void GetInterpolatedKnot(Vector T_,int N,int K,int M,Vector T)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>曲線/曲面パラメータから補間用ノットベクトルを算出</DD>
<DT> ＜引数＞ </DT>
<DD> T_：曲線パラメータ列<BR>
 N：ノットベクトルの数<BR>
 K：コントロールポイントの数  <BR>
 M：階数  <BR>
 T：格納するノットベクトル列 <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>なし <BR>
</DD>
</DL>
<BR><BR>

<A NAME="GetApproximatedKnot()"> </A>
<H4>private<BR>
void GetApproximatedKnot(Vector T_,int N,int M,int K,Vector T)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>曲線/曲面パラメータから近似用ノットベクトルを算出</DD>
<DT> ＜引数＞ </DT>
<DD> T_：曲線パラメータ列<BR>
 N：ノットベクトルの数<BR>
 K：コントロールポイントの数  <BR>
 M：階数  <BR>
 T：格納するノットベクトル列 <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>なし <BR>
</DD>
</DL>
<BR><BR>

<A NAME="CalcApproximationCP_LSM()"> </A>
<H4>private<BR>
void CalcApproximationCP_LSM(Coord *P,Vector T_,Vector T,int Pnum,int Nnum,int M,int K,Coord *Q)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>最小2乗法で近似コントロールポイントを求める</DD>
<DT> ＜引数＞ </DT>
<DD> *P：通過点列 <BR>
 T_：曲線パラメータ列<BR>
 T：ノットベクトル
 Pnum：曲線パラメータの数
 Nnum：ノットベクトルの数<BR>
 K：コントロールポイントの数  <BR>
 M：階数  <BR>
 *Q：算出されたコントロールポイント列 <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>なし <BR>
</DD>
</DL>
<BR><BR>

<A NAME="RemoveTheSamePoints()"> </A>
<H4>private<BR>
void RemoveTheSamePoints(NURBSS *S,Coord *Q,int N)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>同一点を除去する</DD>
<DT> ＜引数＞ </DT>
<DD> *S：NURBS曲面 <BR>
  *Q：曲面上の(u,v)パラメータ群(変更後の点群もここに格納される)
  N：点数 <BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>変更後の点数 <BR>
</DD>
</DL>
<BR><BR>

<A NAME="SetApproximationCPnum()"> </A>
<H4>private<BR>
int SetApproximationCPnum(int PNum)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>点列数から生成するコントロールポイント数を算定する</DD>
<DT> ＜引数＞ </DT>
<DD> PNum：点列数<BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>コントロールポイント数 <BR>
</DD>
</DL>
<BR><BR>

<A NAME="CalcDiffNurbsSSub()"> </A>
<H4>private<BR>
double CalcDiffNurbsSDenom(NURBSS *S,int k,int l,double u,double v)<BR>
double CalcDiffNurbsSNumer(NURBSS *S,int k,int l,double u,double v)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD> NURBS曲面分母の各方向を任意階微分したときの微分係数を求めるSub関数</DD>
<DT> ＜引数＞ </DT>
<DD> *S：NURBS曲面へのポインタ<BR>
 k：u方向の微分階数<BR>
 l：v方向の微分階数<BR>
 u,v：u方向v方向それぞれのパラメータ<BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>係数 <BR>
</DD>
</DL>
<BR><BR>

<A NAME="TrimNurbsSPlaneSub1()"> </A>
<H4>private<BR>
Coord TrimNurbsSPlaneSub1(double a,double b,double x0,double y0,double x1,double y1)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>TrimNurbsSPlaneのサブ関数(2D上の2直線の交点をもとめる)</DD>
<DT> ＜引数＞ </DT>
<DD> a,b：1つ目の直線の係数<BR>
 x0,y0,x1,y1：2つ目の直線が通る2点<BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>交点の2D座標<BR>
</DD>
</DL>
<BR><BR>

<A NAME="CalcIntersecPtsPlaneSearch_Sub()"> </A>
<H4>private<BR>
Coord CalcIntersecPtsPlaneSearch_Sub(NURBSS *nurb,double u, double v,Coord pt,Coord nvec)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>面から飛び出した(u,v)を参考に面のエッジ部(new_u,new_v)を得る</DD>
<DT> ＜引数＞ </DT>
<DD> *nurb：NURBS曲面<BR>
 u,v：NURBS曲面パラメータ<BR>
 pt：平面上の1点<BR>
 nvec：平面の法線ベクトル<BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>エッジ上の曲面パラメータ<BR>
</DD>
</DL>
<BR><BR>

<A NAME="GetMinDistance()"> </A>
<H4>private<BR>
Coord GetMinDistance(Coord a,Coord *b,int n)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>1点aに対して点群b_nから最小距離となる座標値b_minを返す</DD>
<DT> ＜引数＞ </DT>
<DD> a：対象とする1点<BR>
 *b：探索する点群<BR>
 n：点群の数<BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>最小距離となる点b_min<BR>
</DD>
</DL>
<BR><BR>

<A NAME="CheckClossedPoints()"> </A>
<H4>private<BR>
int CheckClossedPoints(NURBSS *nurb,Coord A,Coord B,Coord P)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>指定した点Pが他の2点A,Bを対角とする立方体の中に存在するかを調べる</DD>
<DT> ＜引数＞ </DT>
<DD> *nurb：NURBS曲面<BR>
 A,B：対角をなす2点<BR>
 P：調査対象の点<BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>KOD_TRUE：存在する,  KOD_FALSE：存在しない<BR>
</DD>
</DL>
<BR><BR>

<A NAME="GetSECParam1()"> </A>
<H4>private<BR>
int GetSECParam1(NURBSS *S,double u,double v,Coord nf,int param,int direction,Coord *f)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>極値探索線Sub関数1</DD>
<DT> ＜引数＞ </DT>
<DD> *nurb：NURBS曲面<BR>
 u,v：NURBS曲面パラメータ<BR>
 nf：(u,v)での法線ベクトル<BR>
 param：PARAM_U or PARAM_V<BR>
 direction：探索方向<BR>
 *f：計算結果を格納<BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>KOD_TRUE：計算成功,  KOD_FALSE：ゼロ割により計算中断<BR>
</DD>
</DL>
<BR><BR>


<A NAME="GetMinDist()"> </A>
<H4>private<BR>
int GetMinDist(NURBSS *S,Coord P,Coord *Q,int N,Coord *Ans)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>CalcIntersecPtNurbsPtのサブ関数(空間上の1点とNURBS曲面上にあるいくつかの点との距離で最小のものを調べる)</DD>
<DT> ＜引数＞ </DT>
<DD> *S：NURBS曲面へのポインタ<BR>
 P：空間上の1点<BR>
 *Q：曲面上の点群(u,vパラメータで指定)<BR>
 N：点数<BR>
 *Ans：最小距離を持つ曲面上の点<BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>  成功：KOD_TRUE<BR>  
 失敗：KOD_FALSE <BR>
</DD>
</DL>
<BR><BR>

<A NAME="SetKnotVecSU_ConnectS()"> </A>
<H4>private<BR>
void SetKnotVecSU_ConnectS(NURBSS *S1,NURBSS *S2,NURBSS *S_)<BR>
void SetKnotVecSV_ConnectS(NURBSS *S1,NURBSS *S2,NURBSS *S_)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>S1とS2を連結しS_を生成する際のS_のU/V方向ノット定義域を設定する</DD>
<DT> ＜引数＞ </DT>
<DD> *S1,*S2：連結する2つのNURBS曲面<BR>
 *S_：連結後のNURBS曲面<BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>  なし<BR>
</DD>
</DL>
<BR><BR>

<A NAME="SetKnotVecSU_ConnectS()"> </A>
<H4>private<BR>
void SetCPSU_ConnectS(NURBSS *S1,NURBSS *S2,NURBSS *S_)<BR>
void SetCPSV_ConnectS(NURBSS *S1,NURBSS *S2,NURBSS *S_)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>S1とS2を連結しS_を生成する際のS_のU/V方向コントロールポイントとウェイトを設定する</DD>
<DT> ＜引数＞ </DT>
<DD> *S1,*S2：連結する2つのNURBS曲面<BR>
 *S_：連結後のNURBS曲面<BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>  なし<BR>
</DD>
</DL>
<BR><BR>

<A NAME="InsertNewKnotOnNurbsC()"> </A>
<H4>private<BR>
int InsertNewKnotOnNurbsC(NURBSC *C,NURBSC *C_,double t,int deg)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>NURBS曲線に新たなノットを挿入する</DD>
<DT> ＜引数＞ </DT>
<DD> *C：連結する2つのNURBS曲線<BR>
 *C_：連結後のNURBS曲線<BR>
 t：挿入するノット<BR>
 deg：多重度<BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>  新たなノットベクトル列におけるtの挿入位置<BR>
</DD>
</DL>
<BR><BR>

<A NAME="SetKnotVecC_ConnectC()"> </A>
<H4>private<BR>
void SetKnotVecC_ConnectC(NURBSC *C1,NURBSC *C2,NURBSC *C_)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>2本のNURBS曲線を繋げたときのノットベクトルを設定する</DD>
<DT> ＜引数＞ </DT>
<DD> *S1,*S2：連結する2つのNURBS曲線<BR>
 *S_：連結後のNURBS曲線<BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>  なし<BR>
</DD>
</DL>
<BR><BR>

<A NAME="SetCPC_ConnectC()"> </A>
<H4>private<BR>
void SetCPC_ConnectC(NURBSC *C1,NURBSC *C2,NURBSC *C_)<BR></H4>
<DL>
<DT> ＜説明＞ </DT>
<DD>2本のNURBS曲線を繋げたときのコントロールポイントとウェイトを設定する</DD>
<DT> ＜引数＞ </DT>
<DD> *S1,*S2：連結する2つのNURBS曲線<BR>
 *S_：連結後のNURBS曲線<BR>
</DD>
<DT> ＜戻り値＞ </DT>
<DD>  なし<BR>
</DD>
</DL>
<BR><BR>

</blockquote> <HR> Document Release 3.0.1 for Kodatuno R3.0.1, Oct. 2014<P> <hr> <center>
<A HREF="./3-1.html" TARGET="_top">Prev</A>
<A HREF="./index.html" TARGET="_top">index</A>
<A HREF="./3-3.html" TARGET="_top">Next</A><br>
</center> <hr> <table cellpadding="0" cellspacing="0" border="0" width="100%">    
<tr>      
	<td align="left">        
		<small>Copyright(C) Kodatuno Development Team, 2011</small>      
	</td>      
	<td align="right">        
		<small><i>Last modified: Oct. 22, 2014</i></small>      
	</td>   
</tr> </table>  <!-- end of body --> </body>  
</html>  



